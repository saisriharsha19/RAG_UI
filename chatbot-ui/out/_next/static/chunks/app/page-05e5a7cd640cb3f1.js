(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1083:(e,t,s)=>{Promise.resolve().then(s.bind(s,8963))},8963:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>F});var a=s(5155),r=s(2115),l=s(3463),n=s(9795);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,l.$)(t))}let d=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:o("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});d.displayName="Input";var c=s(1290);let i=(0,s(1027).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:n=!1,...d}=e,m=n?c.DX:"button";return(0,a.jsx)(m,{className:o(i({variant:r,size:l,className:s})),ref:t,...d})});m.displayName="Button";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("rounded-xl border bg-card text-card-foreground shadow",s),...r})});x.displayName="Card",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",s),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("p-6 pt-0",s),...r})});u.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";var g=s(8888),h=s(7195),p=s(7193),f=s(9516),b=s(4180),y=s(2591),w=s(1234),v=s(319),j=s(6535),N=s(8482),k=s(8281),A=s(1680),C=s(2501),S=s(1983),T=s(2715),E=s(4673),D=s(2582),L=s(1031),R=s(5600),_=s(8305),I=s(6758),O=s(1873),M=s(9609),U=s(3474),B=s(5524);function F(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(""),[n,o]=(0,r.useState)(!1),[c,i]=(0,r.useState)(!1),[F,P]=(0,r.useState)(""),[V,W]=(0,r.useState)(!1),[q,J]=(0,r.useState)(!1),[K,z]=(0,r.useState)([]),[H,Y]=(0,r.useState)([]),[$,G]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(!1),[Z,ee]=(0,r.useState)(""),et=(0,r.useRef)(null),es=(0,r.useRef)(null),ea=(0,r.useRef)(null),er=(0,r.useRef)(null),el=(0,r.useRef)([]),en="http://localhost:8000";(0,r.useEffect)(()=>{o(window.matchMedia("(prefers-color-scheme: dark)").matches)},[]),(0,r.useEffect)(()=>{document.documentElement.classList.toggle("dark",n)},[n]),(0,r.useEffect)(()=>{let e=localStorage.getItem("chatMessages");if(e)try{let s=JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)}));t(s)}catch(e){console.error("Error parsing saved messages:",e)}},[]),(0,r.useEffect)(()=>{e.length>0&&localStorage.setItem("chatMessages",JSON.stringify(e))},[e]),(0,r.useEffect)(()=>{eo()},[e]),(0,r.useEffect)(()=>{$&&ec()},[$]);let eo=()=>{var e;null===(e=et.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},ed=()=>Math.random().toString(36).substring(2,15),ec=async()=>{try{let e=await fetch("".concat(en,"/documents"));if(e.ok){let t=await e.json();Y(t)}else console.error("Failed to fetch documents:",await e.text())}catch(e){console.error("Error fetching documents:",e)}},ei=async e=>{X(!0),ee("");try{let s=new FormData;s.append("file",e);let a=await fetch("".concat(en,"/upload_document"),{method:"POST",body:s});if(a.ok){let e=await a.json();Y(t=>[...t,e]);let s={id:ed(),role:"bot",content:'Document "'.concat(e.filename,'" uploaded successfully and is now available for answering queries.'),timestamp:new Date,status:"read"};return t(e=>[...e,s]),e}{let e=await a.text();return ee("Failed to upload document: ".concat(e)),console.error("Failed to upload document:",e),null}}catch(t){let e=t instanceof Error?t.message:String(t);return ee("Error uploading document: ".concat(e)),console.error("Error uploading document:",t),null}finally{X(!1)}},em=async e=>{try{let s=await fetch("".concat(en,"/documents/").concat(e),{method:"DELETE"});if(s.ok){Y(t=>t.filter(t=>t.id!==e));let s={id:ed(),role:"bot",content:"Document removed successfully.",timestamp:new Date,status:"read"};t(e=>[...e,s])}else console.error("Failed to delete document:",await s.text())}catch(e){console.error("Error deleting document:",e)}},ex=async()=>{if(!s.trim()&&0===K.length)return;let a=!1,r=[];if(K.length>0)for(let e of K){var n;if(["pdf","txt","doc","docx","csv","md"].includes((null===(n=e.name.split(".").pop())||void 0===n?void 0:n.toLowerCase())||"")){let t=await ei(e);t&&(a=!0,r.push({type:e.type,url:URL.createObjectURL(e),name:e.name,docId:t.id}))}}let o=await Promise.all(K.filter(e=>{var t;return!["pdf","txt","doc","docx","csv","md"].includes((null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"")}).map(async e=>{let t=URL.createObjectURL(e);return{type:e.type,url:t,name:e.name}})),d=[...r,...o];if(a&&!s.trim()&&0===o.length){z([]);return}let c=eb(s.trim()),i={id:ed(),role:"user",content:s.trim(),contentType:c,timestamp:new Date,status:"sending",attachments:d.length>0?d:void 0};t([...e,i]),l(""),z([]),setTimeout(()=>{t(e=>e.map(e=>e.id===i.id?{...e,status:"sent"}:e))},500),J(!0);try{let e=await fetch("".concat(en,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s,attachments:d.map(e=>e.name)})});t(e=>e.map(e=>e.id===i.id?{...e,status:"delivered"}:e));let a=await e.json();J(!1);let r={id:ed(),role:"bot",content:a.response,contentType:eb(a.response),timestamp:new Date,status:"read"};t(e=>[...e,r]),setTimeout(()=>{t(e=>e.map(e=>e.id===i.id?{...e,status:"read"}:e))},1e3)}catch(s){console.error("Error fetching response:",s),J(!1);let e={id:ed(),role:"bot",content:"Sorry, I couldn't process your request. Please try again later.",timestamp:new Date,status:"read"};t(t=>[...t,e])}},eu=e=>{navigator.clipboard.writeText(e)},eg=(e,s)=>{t(t=>t.map(t=>{if(t.id===e){let e=t.reactions||[],a=e.includes(s)?e.filter(e=>e!==s):[...e,s];return{...t,reactions:a}}return t}))},eh=async e=>{if(e.target.files&&e.target.files.length>0){let t=e.target.files[0];await ei(t),e.target instanceof HTMLInputElement&&(e.target.value="")}},ep=async()=>{if(c)er.current&&(er.current.stop(),i(!1));else try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);er.current=t,el.current=[],t.ondataavailable=e=>{el.current.push(e.data)},t.onstop=async()=>{let t=new Blob(el.current,{type:"audio/wav"});i(!0);try{let e=new FormData;e.append("audio_file",t,"recording.wav"),e.append("request_data",JSON.stringify({filename:"recording.wav"}));let s=await fetch("".concat(en,"/transcribe_audio"),{method:"POST",body:e});if(!s.ok)throw Error("Server responded with ".concat(s.status));let a=await s.json();l(e=>e+(e?" ":"")+a.text)}catch(e){console.error("Error transcribing audio:",e),l(e=>e+(e?" ":"")+"[Voice transcription failed]")}finally{i(!1),e.getTracks().forEach(e=>e.stop())}},t.start(),i(!0)}catch(e){console.error("Error accessing microphone:",e)}},ef=()=>{G(!$)},eb=e=>{if(e.includes("```")||e.includes("function ")||e.includes("const ")||e.includes("class ")||e.includes("import ")||e.includes("export ")||e.includes(";")&&e.includes("{")&&e.includes("}"))return"code";if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),"json"}catch(e){console.log(e)}return e.match(/\.(jpeg|jpg|gif|png|svg)$/i)||e.startsWith("data:image/")?"image":/https?:\/\/[^\s]+/.test(e)?"link":e.includes("# ")||e.includes("## ")||e.includes("**")||e.includes("__")||e.includes("- ")||e.includes("> ")||e.includes("![")||e.includes("[")&&e.includes("](")?"markdown":"text"},ey=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/864e5);return 0===t?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):1===t?"Yesterday":t<7?e.toLocaleDateString([],{weekday:"short"}):e.toLocaleDateString([],{month:"short",day:"numeric"})},ew=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",ev=e=>{switch(e){case"sending":return(0,a.jsx)(h.A,{className:"w-3 h-3 text-gray-400"});case"sent":return(0,a.jsx)(p.A,{className:"w-3 h-3 text-gray-400"});case"delivered":return(0,a.jsx)(p.A,{className:"w-3 h-3 text-blue-500"});case"read":return(0,a.jsx)(f.A,{className:"w-3 h-3 text-blue-500"})}},ej=F.trim()?e.filter(e=>e.content.toLowerCase().includes(F.toLowerCase())):e;return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen w-full bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-2 sm:p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-3xl mx-auto flex flex-col h-[98vh]",children:[(0,a.jsxs)("div",{className:"w-full mb-2 sm:mb-4 flex justify-between items-center p-2 sm:p-3 bg-white dark:bg-gray-800 rounded-2xl shadow-md",children:[(0,a.jsxs)("h1",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[(0,a.jsx)(b.A,{className:"w-5 h-5 mr-2 text-blue-500"}),"Vision AI Chatbot"]}),(0,a.jsxs)("div",{className:"flex gap-1 sm:gap-2",children:[(0,a.jsx)("button",{onClick:()=>{W(!V),V||P("")},className:"p-1.5 sm:p-2 rounded-full ".concat(V?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200"," hover:bg-opacity-90 transition"),title:"Search messages",children:(0,a.jsx)(y.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,a.jsx)("button",{onClick:ef,className:"p-1.5 sm:p-2 rounded-full ".concat($?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200"," hover:bg-opacity-90 transition"),title:"Manage documents",children:(0,a.jsx)(w.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,a.jsx)("button",{onClick:()=>{let t=new Blob([e.map(e=>"[".concat(e.timestamp.toLocaleString(),"] ").concat("user"===e.role?"You":"Bot",": ").concat(e.content)).join("\n\n")],{type:"text/plain"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="chat-export-".concat(new Date().toISOString().slice(0,10),".txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},className:"bg-gray-100 dark:bg-gray-700 p-1.5 sm:p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition text-gray-700 dark:text-gray-200",title:"Export chat",children:(0,a.jsx)(v.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,a.jsx)("button",{onClick:()=>o(!n),className:"bg-gray-100 dark:bg-gray-700 p-1.5 sm:p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition",title:"Toggle dark mode",children:n?(0,a.jsx)(j.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500"}):(0,a.jsx)(N.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700"})})]})]}),V&&(0,a.jsx)("div",{className:"w-full mb-2 sm:mb-4",children:(0,a.jsx)(d,{value:F,onChange:e=>P(e.target.value),placeholder:"Search messages...",className:"w-full p-2 sm:p-3 border rounded-xl bg-white dark:bg-gray-800 dark:text-white shadow-md"})}),$&&(0,a.jsx)(x,{className:"w-full mb-2 sm:mb-4 shadow-lg rounded-2xl  bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 flex-grow flex flex-col",children:(0,a.jsxs)(u,{className:"p-2 sm:p-4 scrollbar-thin",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2 sm:mb-4",children:[(0,a.jsxs)("h2",{className:"text-base sm:text-lg font-semibold dark:text-white flex items-center",children:[(0,a.jsx)(w.A,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-blue-500"}),"Knowledge Base"]}),(0,a.jsxs)(m,{onClick:()=>{var e;null===(e=ea.current)||void 0===e||e.click()},className:"bg-blue-600 hover:bg-blue-700 text-white px-2 sm:px-3 py-1 sm:py-2 rounded-lg flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",disabled:Q,children:[Q?(0,a.jsx)("div",{className:"animate-spin h-3 w-3 sm:h-4 sm:w-4 border-2 border-white border-t-transparent rounded-full"}):(0,a.jsx)(k.A,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Upload"]})]}),Z&&(0,a.jsxs)("div",{className:"mb-2 sm:mb-4 p-2 sm:p-3 bg-red-100 border border-red-400 text-red-700 rounded-md flex items-start",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 flex-shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm",children:Z})]}),0===H.length?(0,a.jsxs)("div",{className:"text-center py-4 sm:py-6 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(C.A,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No documents uploaded yet."}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Upload documents to enhance responses."})]}):(0,a.jsx)("div",{className:"space-y-2 max-h-40 sm:max-h-48 overflow-y-auto pr-1 scrollbar-thin",children:H.map(e=>(0,a.jsxs)("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded-lg flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center overflow-hidden",children:[(0,a.jsx)(S.A,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 text-blue-500 flex-shrink-0"}),(0,a.jsxs)("div",{className:"overflow-hidden",children:[(0,a.jsx)("p",{className:"font-medium text-xs sm:text-sm dark:text-white truncate",children:e.filename}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.upload_date).toLocaleDateString()})]})]}),(0,a.jsx)("button",{onClick:()=>em(e.id),className:"p-1 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 flex-shrink-0",title:"Delete document",children:(0,a.jsx)(T.A,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]},e.id))})]})}),(0,a.jsxs)(x,{className:"w-full shadow-lg rounded-2xl overflow-hidden bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 flex-grow flex flex-col",children:[(0,a.jsxs)(u,{className:"flex-grow overflow-y-auto p-2 sm:p-4 flex flex-col gap-2 sm:gap-3 scrollbar-thin",children:[0===e.length&&(0,a.jsxs)("div",{className:"text-center py-6 sm:py-10 flex-grow flex flex-col items-center justify-center",children:[(0,a.jsx)(b.A,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 text-blue-500 opacity-70"}),(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-2 dark:text-white",children:"Welcome to Vision AI Chatbot"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 max-w-md",children:"I can answer questions based on your uploaded documents. Try uploading some documents first!"}),(0,a.jsxs)(m,{onClick:ef,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg flex items-center gap-2 text-sm",children:[(0,a.jsx)(w.A,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Manage Documents"]})]}),ej.map(e=>(0,a.jsx)("div",{className:"relative ".concat(F&&e.content.toLowerCase().includes(F.toLowerCase())?"bg-yellow-50 dark:bg-yellow-900/30 p-1 rounded-xl":""),children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"mr-2 flex-shrink-0",children:"user"===e.role?(0,a.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-500 rounded-full flex items-center justify-center text-white",children:(0,a.jsx)(E.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})}):(0,a.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-green-500 rounded-full flex items-center justify-center text-white",children:(0,a.jsx)(b.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-xs sm:text-sm text-gray-700 dark:text-gray-300",children:"user"===e.role?"You":"Bot"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:ey(e.timestamp)}),e.contentType&&"text"!==e.contentType&&(0,a.jsxs)("span",{className:"ml-2 hidden sm:flex items-center text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:["code"===e.contentType&&(0,a.jsx)(D.A,{className:"w-3 h-3 mr-1"}),"json"===e.contentType&&(0,a.jsx)(D.A,{className:"w-3 h-3 mr-1"}),"link"===e.contentType&&(0,a.jsx)(L.A,{className:"w-3 h-3 mr-1"}),"image"===e.contentType&&(0,a.jsx)(R.A,{className:"w-3 h-3 mr-1"}),"markdown"===e.contentType&&(0,a.jsx)(S.A,{className:"w-3 h-3 mr-1"}),e.contentType.charAt(0).toUpperCase()+e.contentType.slice(1)]}),"user"===e.role&&(0,a.jsx)("span",{className:"ml-auto",children:ev(e.status)})]}),(0,a.jsxs)(g.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.2},className:"p-2 sm:p-3 rounded-2xl break-words text-sm sm:text-base ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"),children:["code"===e.contentType?(0,a.jsx)("div",{className:"font-mono text-xs sm:text-sm bg-gray-800 dark:bg-gray-900 text-green-400 p-2 rounded overflow-x-auto",children:(0,a.jsx)("pre",{children:e.content})}):"json"===e.contentType?(0,a.jsx)("div",{className:"font-mono text-xs sm:text-sm bg-gray-800 dark:bg-gray-900 text-yellow-300 p-2 rounded overflow-x-auto",children:(0,a.jsx)("pre",{children:e.content})}):"link"===e.contentType?(0,a.jsx)("div",{children:(0,a.jsx)("a",{href:e.content,target:"_blank",rel:"noopener noreferrer",className:"text-blue-300 dark:text-blue-400 underline break-all",children:e.content})}):"image"===e.contentType?(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("img",{src:e.content,alt:"Shared image",className:"max-w-full rounded",onError:e=>{let t=e.target;t.onerror=null,t.src="/placeholder-image.jpg"}})})}):"markdown"===e.contentType?(0,a.jsx)("div",{className:"prose dark:prose-invert prose-sm max-w-none",children:e.content}):(0,a.jsx)("div",{children:e.content}),e.attachments&&e.attachments.length>0&&(0,a.jsx)("div",{className:"mt-2 space-y-1 sm:space-y-2",children:e.attachments.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center p-1.5 sm:p-2 rounded bg-white dark:bg-gray-600 bg-opacity-20 text-xs sm:text-sm",children:[e.docId?(0,a.jsx)(w.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2 text-green-500"}):(0,a.jsx)(_.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),(0,a.jsxs)("span",{className:"truncate",children:[e.name,e.docId&&(0,a.jsx)("span",{className:"ml-1 text-xs text-gray-300",children:"(KB)"})]})]},t))})]}),e.reactions&&e.reactions.length>0&&(0,a.jsx)("div",{className:"flex mt-1 space-x-1",children:e.reactions.map((e,t)=>(0,a.jsx)("span",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs sm:text-sm",children:e},t))})]}),(0,a.jsxs)("div",{className:"hidden group-hover:flex sm:flex flex-row sm:flex-col ml-1 sm:ml-2 sm:space-y-1 space-x-1 sm:space-x-0",children:[(0,a.jsx)("button",{onClick:()=>eu(e.content),className:"p-1 bg-gray-100 dark:bg-gray-700 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition",title:"Copy message",children:(0,a.jsx)(I.A,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),(0,a.jsx)("button",{onClick:()=>eg(e.id,"\uD83D\uDC4D"),className:"p-1 bg-gray-100 dark:bg-gray-700 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition",title:"Add reaction",children:(0,a.jsx)(O.A,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})},e.id)),q&&(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"mr-2",children:(0,a.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-green-500 rounded-full flex items-center justify-center text-white",children:(0,a.jsx)(b.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),(0,a.jsx)(g.P.div,{className:"p-2 sm:p-3 rounded-xl bg-gray-100 dark:bg-gray-700",animate:{opacity:[.5,1,.5]},transition:{repeat:1/0,duration:1.5},children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-gray-500 dark:bg-gray-300"}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-gray-500 dark:bg-gray-300"}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-gray-500 dark:bg-gray-300"})]})})]}),(0,a.jsx)("div",{ref:et})]}),(0,a.jsxs)("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 p-2 sm:p-4 border-t dark:border-gray-700",children:[K.length>0&&(0,a.jsx)("div",{className:"mb-2 flex flex-wrap gap-1 sm:gap-2",children:K.map((e,t)=>{var s;let r=["pdf","txt","doc","docx","csv","md"].includes((null===(s=e.name.split(".").pop())||void 0===s?void 0:s.toLowerCase())||"");return(0,a.jsxs)("div",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 ".concat(r?"bg-green-100 dark:bg-green-900":"bg-blue-100 dark:bg-blue-900"," rounded-lg text-xs flex items-center"),children:[r?(0,a.jsx)(w.A,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 mr-1 text-green-700 dark:text-green-500"}):(0,a.jsx)(_.A,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 mr-1"}),(0,a.jsx)("span",{className:"truncate max-w-[100px] sm:max-w-[150px]",children:e.name}),(0,a.jsx)("span",{className:"ml-1 text-xs opacity-70 hidden sm:inline",children:ew(e.size)}),(0,a.jsx)("button",{onClick:()=>z(e=>e.filter((e,s)=>s!==t)),className:"ml-1 text-red-500 hover:text-red-700",children:"\xd7"})]},t)})}),(0,a.jsxs)("div",{className:"flex gap-1 sm:gap-2",children:[(0,a.jsxs)("div",{className:"relative w-full max-w-2xl mx-auto",children:[(0,a.jsx)("input",{value:s,onChange:e=>l(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ex())},placeholder:"Ask a question...",className:"w-full p-3 pr-12 border rounded-xl bg-gray-50 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"}),(0,a.jsx)("button",{onClick:ex,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center w-8 h-8","aria-label":"Send message",children:(0,a.jsx)(M.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex gap-1 sm:gap-2",children:[(0,a.jsx)("button",{onClick:()=>{var e;null===(e=es.current)||void 0===e||e.click()},className:"p-2 sm:p-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Add attachment",children:(0,a.jsx)(_.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,a.jsx)("button",{onClick:ep,className:"p-2 sm:p-3 rounded-lg ".concat(c?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"),title:c?"Stop recording":"Start voice recording",children:(0,a.jsx)(U.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,a.jsx)("button",{onClick:()=>{t([]),localStorage.removeItem("chatMessages")},className:"hidden sm:flex p-2 sm:p-3 bg-red-500 hover:bg-red-600 text-white rounded-lg items-center justify-center",title:"Clear chat",children:(0,a.jsx)(B.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),(0,a.jsx)("input",{type:"file",ref:es,onChange:e=>{e.target.files&&z(Array.from(e.target.files))},multiple:!0,className:"hidden"}),(0,a.jsx)("input",{type:"file",ref:ea,onChange:eh,accept:".pdf,.txt,.doc,.docx,.csv,.md",className:"hidden"})]})]}),(0,a.jsx)("div",{className:"mt-2 text-center",children:(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Vision AI Chatbot v2.0 ",(0,a.jsx)("br",{})," Developed by Sai Sri harsha Guddati •",(0,a.jsx)("button",{className:"ml-1 text-blue-500 hover:text-blue-600",children:"Help"})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[925,441,517,358],()=>t(1083)),_N_E=e.O()}]);